!function(a,b){"function"==typeof define&&define.amd?define(["get-style-property/get-style-property","classie/classie","eventEmitter/EventEmitter","hammerjs/hammer"],b):a.SwitchSlide=b(a.getStyleProperty,a.classie,a.EventEmitter,a.Hammer)}(this,function(a,b,c,d){"use strict";var e,f,g,h,i,j,k;return h=function(a,b){var c;for(c in b)a[c]=b[c];return a},j=a("transform"),e=0,i={},g=function(){function a(a,b){this.message=a,this.name=null!=b?b:"SwitchSlideException"}return a}(),k={getTemplate:function(){return'<div class="widgetSlide"> <div class="widgetSlide__opt widgetSlide__opt--min"> <span>{captionMin}</span> </div> <div class="widgetSlide__knob"></div> <div class="widgetSlide__opt widgetSlide__opt--max"> <span>{captionMax}</span> </div>'},getSizes:function(){var a,b,c,d,e,f;return a=this.container.cloneNode(!0),a.style.visibility="hidden",a.style.position="absolute",document.body.appendChild(a),f=a.querySelector(this.options.selectors.widget),d=f.querySelector(this.options.selectors.optMin),c=f.querySelector(this.options.selectors.optMax),b=f.querySelector(this.options.selectors.knob),e={sMin:d.clientWidth,sMax:c.clientWidth,knob:b.clientWidth},document.body.removeChild(a),a=null,e},onToggle:function(){var a,b,c,d,e,f,g,h,i,j;if(d=this.options.negative?-1*this.width:this.width,null!==this.ligado)this.active=!0,this.transform.translate.x=this.ligado?d:0,a=this.ligado?1:0,b=1^a,k.checked(this.radios[a]),k.unchecked(this.radios[b]);else for(this.active=!1,this.transform.translate.x=d/2,i=this.radios,e=0,g=i.length;g>e;e++)c=i[e],k.unchecked(c);for(this.isActive(),this.updateAria(),this.updateValor(),this.updatePosition(),this.emitToggle(),j=this.radios,f=0,h=j.length;h>f;f++)c=j[f],c.checked&&c.dispatchEvent(this.eventChange)},onStart:function(a){a.focus(),b.add(a,"is-dragging")},onMove:function(a){var b,c;c=this.options.negative?-1*this.width:this.width,b=c/2+a.deltaX,null!==this.ligado&&(b=this.ligado?c+a.deltaX:a.deltaX),this.transform.translate.x=this.options.negative?Math.min(0,Math.max(c,b)):Math.min(c,Math.max(b,0)),this.updatePosition()},onEnd:function(a){this.ligado=Math.abs(this.transform.translate.x)>this.width/2,b.remove(a,"is-dragging"),k.onToggle.call(this)},onTap:function(a,b){var c,d;d=a.getBoundingClientRect(),c=d.left+d.width/2,this.ligado=this.options.negative?b.center.x<c:b.center.x>c,k.onToggle.call(this)},onKeydown:function(a){var b;switch(b=!1,a.keyCode){case this.keyCodes.space:this.ligado=!this.ligado,b=!0;break;case this.keyCodes.right:this.ligado=!this.options.negative,b=!0;break;case this.keyCodes.left:this.ligado=this.options.negative,b=!0}b&&k.onToggle.call(this)},setElements:function(){return this.widget=this.container.querySelector(this.options.selectors.widget),this.sMin=this.widget.querySelector(this.options.selectors.optMax),this.sMax=this.widget.querySelector(this.options.selectors.optMin),this.knob=this.widget.querySelector(this.options.selectors.knob)},setSizes:function(){return this.sMin.style.width=""+this.width+"px",this.sMax.style.width=""+this.width+"px",this.knob.style.width=""+this.width+"px",this.container.style.width=2*this.width+"px"},getTapElement:function(){return this.widget},getDragElement:function(){return this.knob},checked:function(a){a.setAttribute("checked",""),a.checked=!0},unchecked:function(a){a.removeAttribute("checked"),a.checked=!1},aria:function(a){var b,c,d,e;d=this.aria,e=[];for(b in d)c=d[b],e.push(a.setAttribute(b,c));return e},build:function(){var a,b,c,e,f,g,h,i,j;b=a="",f=this.container.getElementsByTagName("label"),2===f.length?(b=f[this.a].textContent,a=f[this.b].textContent):console.warn("✖ No labels"),h={captionMin:b,captionMax:a},c=this.options.template.replace(/\{(.*?)\}/g,function(a,b){return h[b]}),this.container.insertAdjacentHTML("afterbegin",c),this.options.setElements.call(this),this.sizes=k.getSizes.call(this),this.sizes.max=Math.max(this.sizes.sMax,this.sizes.sMin),this.width=this.sizes.max,this.options.setSizes.call(this),k.aria.call(this,this.widget),j=this.options.getTapElement.call(this),i=new d.Tap,this.mc=new d.Manager(j,{dragLockToAxis:!0,dragBlockHorizontal:!0,preventDefault:!0}),this.mc.add(i),this.mc.on("tap",k.onTap.bind(this,j)),e=this.options.getDragElement.call(this),g=new d.Pan({direction:d.DIRECTION_HORIZONTAL}),this.mk=new d.Manager(e,{dragLockToAxis:!0,dragBlockHorizontal:!0,preventDefault:!0}),this.mk.add(g),this.mk.on("panstart",k.onStart.bind(this,e)),this.mk.on("pan",k.onMove.bind(this)),this.mk.on("panend",k.onEnd.bind(this,e)),this.mk.on("pancancel",k.onEnd.bind(this,e)),this.eventCall={keydown:k.onKeydown.bind(this)},this.widget.addEventListener("keydown",this.eventCall.keydown),k.onToggle.call(this)}},f=function(){function a(c,d){var f,j,l,m,n,o,p;if(!1==this instanceof a)return new a(c,d);if(this.container="string"==typeof c?document.querySelector(c):c,l=a.data(this.container),l instanceof a)return l;for(f=++e,this.container.srGUID=f,i[f]=this,this.options={labeledby:null,required:!1,template:k.getTemplate(),setElements:k.setElements,setSizes:k.setSizes,getTapElement:k.getTapElement,getDragElement:k.getDragElement,negative:!1,swap:!1,initialize:"switchSlide--initialized",selectors:{widget:".widgetSlide",opts:".widgetSlide__opt",optMin:".widgetSlide__opt--min",optMax:".widgetSlide__opt--max",knob:".widgetSlide__knob"}},h(this.options,d),this.a=this.options.swap?1:0,this.b=1^this.a,this.radios=[],n=this.container.getElementsByTagName("input"),j=o=0,p=n.length;p>o;j=++o)m=n[j],"radio"===m.type&&this.radios.push(m);if(2!==this.radios.length)throw new g("✖ No radios");b.add(this.container,this.options.initialize),this.width=0,this.ligado=null,this.radios[this.a].checked&&(this.ligado=!1),this.radios[this.b].checked&&(this.ligado=!0),this.valor=null,this.updateValor(),this.active=!1,this.transform={translate:{x:0}},this.keyCodes={space:32,left:37,right:39},this.aria={tabindex:0,role:"slider","aria-valuemin":this.radios[this.a].title,"aria-valuemax":this.radios[this.b].title,"aria-valuetext":null,"aria-valuenow":null,"aria-labeledby":this.options.labeledby,"aria-required":this.options.required},this.eventToggleParam=[{instance:this,radios:this.radios,value:this.valor}],this.eventChange=new CustomEvent("change"),k.build.call(this)}return a.prototype.emitToggle=function(){this.emitEvent("toggle",this.eventToggleParam)},a.prototype.swap=function(a){this.ligado=null!=a?a:!this.ligado,k.onToggle.call(this)},a.prototype.reset=function(){this.ligado=null,k.onToggle.call(this)},a.prototype.isActive=function(){var a;a=this.active?"add":"remove",b[a](this.knob,"is-active")},a.prototype.updateAria=function(){var a;null!==this.ligado&&(a=this.ligado===!0?this.radios[this.b].title:this.radios[this.a].title,this.widget.setAttribute("aria-valuenow",a),this.widget.setAttribute("aria-valuetext",a))},a.prototype.updateValor=function(){this.valor=null,null!==this.ligado&&(this.valor=this.ligado===!0?this.radios[this.b].value:this.radios[this.a].value),null!=this.eventToggleParam&&(this.eventToggleParam[0].value=this.valor)},a.prototype.updatePosition=function(){var a,b;b=["translate3d("+this.transform.translate.x+"px, 0, 0)"],a=this.options.getDragElement.call(this),a.style[j]=b.join(" ")},a.prototype.destroy=function(){var a;if(null!==this.container){this.widget.removeEventListener("keydown",this.eventCall.keydown),this.mk.destroy(),this.mc.destroy();for(a in this.aria)this.widget.removeAttribute(a);this.container.contains(this.widget)&&this.container.removeChild(this.widget),b.remove(this.container,this.options.initialize),this.container.removeAttribute("style"),delete this.container.srGUID,this.container=null}},a}(),h(f.prototype,c.prototype),f.data=function(a){var b;return b=a&&a.srGUID,b&&i[b]},f});
//# sourceMappingURL=switch.min.js.map