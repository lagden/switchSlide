var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a,b){"function"==typeof define&&define.amd?define(["get-style-property/get-style-property","classie/classie","eventEmitter/EventEmitter","hammerjs/hammer"],b):a.SwitchSlide=b(a.getStyleProperty,a.classie,a.EventEmitter,a.Hammer)}(this,function(a,b,c,d){"use strict";var e,f,g,h,i;return h=a("transform"),e=0,g={},i={getTemplate:function(){return['<div class="switchSlide__opt switchSlide__opt--off">',"<span>{captionOff}</span></div>",'<div class="switchSlide__opt switchSlide__opt--on">',"<span>{captionOn}</span></div>",'<div class="switchSlide__knob"></div>'].join("")},getSizes:function(){var a,b,c,d,e,f;return a=this.container.cloneNode(!0),a.style.visibility="hidden",a.style.position="absolute",document.body.appendChild(a),e=".switchSlide__opt--on",c=".switchSlide__opt--off",d=a.querySelector(e),b=a.querySelector(c),f={sOn:d.clientWidth,sOff:b.clientWidth},document.body.removeChild(a),a=null,f},onToggle:function(){var a,b,c,d;for(this.toggle(),this.emitEvent("toggle",this.eventToggleParam),d=this.radios,b=0,c=d.length;c>b;b++)a=d[b],a.checked&&a.dispatchEvent(this.eventChange)},onStart:function(a){a.focus(),b.add(a,"is-dragging")},onMove:function(a){var b;b=this.size/2+a.deltaX,null!==this.ligado&&(b=this.ligado?this.size+a.deltaX:a.deltaX),this.transform.translate.x=Math.min(this.size,Math.max(b,0)),this.updatePosition()},onEnd:function(a){this.ligado=Math.abs(this.transform.translate.x)>this.size/2,b.remove(a,"is-dragging"),i.onToggle.call(this)},onTap:function(a,b){var c,d;d=a.getBoundingClientRect(),c=d.left+d.width/2,this.ligado=b.center.x>c,i.onToggle.call(this)},onKeydown:function(a){var b;switch(b=!1,a.keyCode){case this.keyCodes.space:this.ligado=!this.ligado,b=!0;break;case this.keyCodes.right:this.ligado=!0,b=!0;break;case this.keyCodes.left:this.ligado=!1,b=!0}b&&i.onToggle.call(this)},checked:function(a){a.setAttribute("checked",""),a.checked=!0},unchecked:function(a){a.removeAttribute("checked"),a.checked=!1},aria:function(a){var b,c,d,e;d=this.aria,e=[];for(b in d)c=d[b],e.push(a.setAttribute(b,c));return e},build:function(){var a,b,c,e,f,g,h,j,k,l,m,n;for(b=a="",f=this.container.getElementsByTagName("label"),2===f.length?(a=f[0].textContent,b=f[1].textContent):console.warn("✖ No labels"),h={captionOn:b,captionOff:a},c=this.template.replace(/\{(.*?)\}/g,function(a,b){return h[b]}),this.container.insertAdjacentHTML("afterbegin",c),this.elements=[],j=i.getSizes.call(this),this.size=Math.max(j.sOn,j.sOff),this.sOn=this.container.querySelector(".switchSlide__opt--on"),this.sOff=this.container.querySelector(".switchSlide__opt--off"),this.drag=this.container.querySelector(".switchSlide__knob"),this.elements.push(this.sOn),this.elements.push(this.sOff),this.elements.push(this.drag),n=this.elements,l=0,m=n.length;m>l;l++)e=n[l],e.style.width=""+this.size+"px";this.container.style.width=2*this.size+"px",i.aria.call(this,this.container),k=new d.Tap,this.mc=new d.Manager(this.container,{dragLockToAxis:!0,dragBlockHorizontal:!0,preventDefault:!0}),this.mc.add(k),this.mc.on("tap",i.onTap.bind(this,this.container)),g=new d.Pan({direction:d.DIRECTION_HORIZONTAL}),this.mk=new d.Manager(this.drag,{dragLockToAxis:!0,dragBlockHorizontal:!0,preventDefault:!0}),this.mk.add(g),this.mk.on("panstart",i.onStart.bind(this,this.drag)),this.mk.on("pan",i.onMove.bind(this)),this.mk.on("panend",i.onEnd.bind(this,this.drag)),this.mk.on("pancancel",i.onEnd.bind(this,this.drag)),this.eventCall={keydown:i.onKeydown.bind(this)},this.container.addEventListener("keydown",this.eventCall.keydown),i.onToggle.call(this)},initCheck:function(a){var b,c,d,e,f,g;for(e=/data-sr(\d+)/i,c=a.attributes,f=0,g=c.length;g>f;f++)b=c[f],e.test(b.name)&&(d=b.name);return d?!0:void 0}},f=function(a){function c(a,b,d){var f,h,j,k,l,m;if(!1==this instanceof c)return new c(a,b,d);if(d=d||null,b=b||!1,i.initCheck(a))return void console.warn("The component has been initialized.");for(f=++e,this.container=a,this.container.srGUID=f,g[f]=this,a.setAttribute("data-sr"+f,""),this.radios=[],k=this.container.getElementsByTagName("input"),h=l=0,m=k.length;m>l;h=++l)j=k[h],"radio"===j.type&&(j.setAttribute("data-side",h),this.radios.push(j));return 2!==this.radios.length?void console.error("✖ No radios"):(this.template=i.getTemplate(),this.size=0,this.ligado=null,this.radios[0].checked&&!this.radios[1].checked&&(this.ligado=!1),this.radios[1].checked&&!this.radios[0].checked&&(this.ligado=!0),this.valor=null,this.updateValor(),this.active=!1,this.transform={translate:{x:0}},this.keyCodes={space:32,left:37,right:39},this.aria={tabindex:0,role:"slider","aria-valuemin":this.radios[0].title,"aria-valuemax":this.radios[1].title,"aria-valuetext":null,"aria-valuenow":null,"aria-labeledby":d,"aria-required":b},this.eventToggleParam=[{instance:this,radios:this.radios,value:this.valor}],this.eventChange=new CustomEvent("change"),void i.build.call(this))}return __extends(c,a),c.prototype.toggle=function(){var a,b,c,d,e,f;if(null!==this.ligado)this.active=!0,this.transform.translate.x=this.ligado?this.size:0,a=this.ligado?1:0,b=1^a,i.checked(this.radios[a]),i.unchecked(this.radios[b]);else for(this.active=!1,this.transform.translate.x=this.size/2,f=this.radios,d=0,e=f.length;e>d;d++)c=f[d],i.unchecked(c);this.isActive(),this.updateAria(),this.updateValor(),this.updatePosition()},c.prototype.swap=function(a){null!=a&&(this.ligado=a),this.ligado=!this.ligado,i.onToggle.call(this)},c.prototype.reset=function(){this.ligado=null,i.onToggle.call(this)},c.prototype.isActive=function(){var a;a=this.active?"add":"remove",b[a](this.drag,"is-active")},c.prototype.updateAria=function(){var a;null!==this.ligado&&(a=this.ligado===!0?this.radios[1].title:this.radios[0].title,this.container.setAttribute("aria-valuenow",a),this.container.setAttribute("aria-valuetext",a))},c.prototype.updateValor=function(){this.valor=null,null!==this.ligado&&(this.valor=this.ligado===!0?this.radios[1].value:this.radios[0].value),null!=this.eventToggleParam&&(this.eventToggleParam[0].value=this.valor)},c.prototype.updatePosition=function(){var a;a=["translate3d("+this.transform.translate.x+"px, 0, 0)"],this.drag.style[h]=a.join(" ")},c.prototype.destroy=function(){var a,b,c,d,e,f,g,h,i;if(null!==this.container){for(h=this.radios,d=0,f=h.length;f>d;d++)c=h[d],c.removeAttribute("data-side");for(this.container.removeEventListener("keydown",this.eventCall.keydown),this.mk.destroy(),this.mc.destroy(),i=this.elements,e=0,g=i.length;g>e;e++)b=i[e],this.container.removeChild(b);for(a in this.aria)this.container.removeAttribute(a);this.container.removeAttribute("class"),this.container.removeAttribute("style"),this.container.removeAttribute("data-sr"+this.container.srGUID),delete this.container.srGUID,this.container=null}},c}(c),f.data=function(a){var b;return b=a&&a.srGUID,b&&g[b]},f});
//# sourceMappingURL=switch.min.js.map